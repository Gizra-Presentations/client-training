<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Scalability & Cost Efficiency through Multisite Installation</title>

	<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
	<meta name="author" content="Hakim El Hattab">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/black.css" id="theme">
	<link href="//fonts.googleapis.com/css?family=Abril+Fatface" rel="stylesheet" type="text/css">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>

	<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
</head>

<body>

	<div class="reveal">

		<!-- Any section element inside of this container is displayed as a slide -->
		<div class="slides">

			<!-- About  -->
			<section data-background="https://cloud.githubusercontent.com/assets/125707/12092123/dd49649a-b303-11e5-9355-e49a3881f5bd.png">
				<div> 
  				<span style="background-color: black; opacity: 0.7; padding: 20px 40px; font-family: Abril Fatface; color: #e27058; font-size: 50px;">
				    gizra
  				</span>
				</div>
    		<div style="margin: 60px 0;">
      		<p style="background-color: black; opacity: 0.7; padding: 20px 40px; line-height: 2em; font-size: 1.2em;">
            Scalability & Cost Efficiency through Multisite Installations
      		</p>
        </div>
    		<div style="margin: 60px 0;">
      		<span style="background-color: black; opacity: 0.7; padding: 20px 40px;">
      		  Adam Stewart, CTO USA (<a href="http://www.twitter.com/adamhstewart">@adamhstewart</a>)
      		</span>
        </div>
			</section>

			<!-- Gizra Modules -->
			<section>
        <span style="font-family: Abril Fatface; color: #e27058; font-size: 50px; margin-right: 20px;">gizra</span>Organic Groups // Message Stack // RESTful // Entity Reference//Commons 3.3 // Commerce Kickstart // OpenScholar
			</section>
      
      <!-- Plan ahead -->
			<section data-background="https://cloud.githubusercontent.com/assets/125707/12292817/67ad3814-b9f8-11e5-97ec-b5c201fcf4a3.jpg">
			</section>

			<!-- Define success -->
			<section>
				<h2>Definition of success</h2>
				<ul>
          <div class="fragment" style="float: left; width: 30%; margin-right: 5%;">
					  <p style="text-align: center; color: #e27058; font-weight: bold;"> On Time</p>
            <img src="https://cloud.githubusercontent.com/assets/688507/16701049/92713db6-452b-11e6-8e0d-c3c1d887236c.JPG" />
					</div>
          <div class="fragment" style="float: left; width: 30%;margin-right: 5%;">
					  <p style="text-align: center; color: #e27058; font-weight: bold;">On Budget</p>
					  <img src="https://cloud.githubusercontent.com/assets/688507/16701048/927091ea-452b-11e6-8231-6eccfdfdbc58.jpg" />
          </div>
          <div class="fragment" style="float: left; width: 30%;">
            <p style="text-align: center; color: #e27058; font-weight: bold;">Users Are Happy</p>
            <img src="http://i.giphy.com/9EC1okpxH360M.gif" />
          </div>
				</ul>
			</section>

			<!-- Types of multisite: Traditional -->
			<section>
				<h4>
  				The Types of Multisite Installations:<br />
          <span style="color: #e27058; font-weight: bold;">"Native" Drupal Multisite</span>
        </h4>
				<img class="stretch" src="http://palantir.net/sites/default/files/general/images/multisite.png">
				<p style="font-size: 16px;">
  				Multisite graphic images from Larry Garfield (@crell) - 
  				<a href="https://www.palantir.net/blog/multi-headed-drupal">https://www.palantir.net/blog/multi-headed-drupal</a>
				</p>
			</section>

			<!-- Types of multisite: Domain Access -->
			<section>
				<h4>
  				The Types of Multisite Installations:<br />
  				<span style="color: #e27058; font-weight: bold;">Domain Access</span>
  		  </h4>
				<img class="stretch" src="http://palantir.net/sites/default/files/general/images/domainaccess.png">
				<p style="font-size: 16px;">
  				Multisite graphic images from Larry Garfield (@crell) - 
  				<a href="https://www.palantir.net/blog/multi-headed-drupal">https://www.palantir.net/blog/multi-headed-drupal</a>
				</p>
			</section>

			<!-- Types of multisite: OG -->
			<section>
				<h4>
  				The Types of Multisite Installations:<br />
  				<span style="color: #e27058; font-weight: bold;">Organic Groups (OG)</span>
  		  </h4>
				<img class="stretch" src="http://palantir.net/sites/default/files/general/images/organicgroups.png">
				<p style="font-size: 16px;">
  				Multisite graphic images from Larry Garfield (@crell) - 
  				<a href="https://www.palantir.net/blog/multi-headed-drupal">https://www.palantir.net/blog/multi-headed-drupal</a>
				</p>
			</section>
 
      <section>
				<h4>Organic Groups is the only way you should be doing multisite</h4>
				<img class="stretch" src="http://palantir.net/sites/default/files/general/images/organicgroups.png">
				<p style="font-size: 16px;">
  				Multisite graphic images from Larry Garfield (@crell) - 
  				<a href="https://www.palantir.net/blog/multi-headed-drupal">https://www.palantir.net/blog/multi-headed-drupal</a>
				</p>
				<p class="fragment" style="color: #e27058; font-weight: bold;">well maybe not really, but probably.</p>
			</section>
 
      <section>
				<h4>What are the Organic Group benefits?</h4>
        <img src="http://s.wsj.net/public/resources/images/OB-QK793_lordor_F_20111104134054.jpg" />
				<ul>
  				<li>“One Database to Rule Them All”</li>
          <li class="fragment">Sensible defaults</li>
          <li class="fragment">Streamlined maintenance</li>
          <li class="fragment">System-wide stats and reporting</li>
          <li class="fragment">Complex permissions and access</li>
				</ul>
			</section>

      <section>
				<h4>But really it's about permission</h4>
          <pre class="stretch" style="margin-bottom: 50px;">
            <code data-trim>
function og_user_access($group_type, $gid, $string, $account = NULL, $skip_alter = FALSE, $ignore_admin = FALSE) {
 global $user;
  $perm = &drupal_static(__FUNCTION__, array());
  // Mark the group ID and permissions that invoked an alter.
  $perm_alter = &drupal_static(__FUNCTION__ . '_alter', array());
  
  if (!og_is_group($group_type, $gid)) {
    // Not a group.
    return NULL;
  }
  
  
  if (empty($account)) {
    $account = clone $user;
  }
  
  // User #1 has all privileges.
  if ($account->uid == 1) {
    return TRUE;
  }
  
  // Administer group permission.
  if (user_access('administer group', $account) && !$ignore_admin) {
    return TRUE;
  }
  
  // Group manager has all privileges (if variable is TRUE).
  if (!empty($account->uid) && variable_get('og_group_manager_full_access', TRUE)) {
    $group = entity_load_single($group_type, $gid);
    if (!empty($group->uid) && $group->uid == $account->uid) {
      return TRUE;
    }
  }
  
  $identifier = $group_type . ':' . $gid;
  
  // To reduce the number of SQL queries, we cache the users permissions
  // in a static variable.
  if (!isset($perm[$identifier][$account->uid])) {
    $roles = og_get_user_roles($group_type, $gid, $account->uid);
    $role_permissions = og_role_permissions($roles);
  
    $perms = array();
    foreach ($role_permissions as $one_role) {
      $perms += $one_role;
    }
    $perm[$identifier][$account->uid] = $perms;
  }
  
  if (!$skip_alter && empty($perm_alter[$identifier][$account->uid][$string])) {
    // Let modules alter the permissions. since $perm is static we create
    // a clone of it.
    $group = !empty($group) ? $group : entity_load_single($group_type, $gid);
    $temp_perm = $perm[$identifier][$account->uid];
    $context = array(
      'string' => $string, 
      'group_type' => $group_type, 
      'group' => $group, 
      'account' => $account,
    );
    drupal_alter('og_user_access', $temp_perm, $context);
  
    // Re-assing the altered permissions.
    $perm[$identifier][$account->uid] = $temp_perm;
  
    // Make sure alter isnt called for the same permissions.
    $perm_alter[$identifier][$account->uid][$string] = TRUE;
  }
  
  return !empty($perm[$identifier][$account->uid][$string]) || (!empty($perm[$identifier][$account->uid]['administer group']) && !$ignore_admin);
}
            </code>
          </pre>
        <p style="font-size: 18px;">
          Users are users and groups are content.
        </p>
			</section>

			<!-- Case Study University -->
      <section data-background="https://cloud.githubusercontent.com/assets/688507/16708381/b074ac64-45bf-11e6-9c68-a4355e5b52c6.jpg" class="present">
        <img class="stretch" src="https://cloud.githubusercontent.com/assets/688507/16703993/428c184c-4540-11e6-9507-ab9e6c2efcc0.gif">
        <p>
          Instantaneous site creation with OpenScholar. <br />
          It's Wix for universities!
        </p>
        <p style="font-size: 0.7em;">Try it: <a href="http://dev-os-install.pantheonsite.io/">http://dev-os-install.pantheonsite.io</a> - Username/Password: osdemo/osdemo</p>
			</section>

      <section data-background="https://cloud.githubusercontent.com/assets/688507/16708381/b074ac64-45bf-11e6-9c68-a4355e5b52c6.jpg" class="present">
				<h4>A Closer Look: The Case of a University</h4>
        <img src="http://i.giphy.com/3osxYamKD88c6pXdfO.gif">
        <p>
          For one, cost alone is enough of a motivation to explore a more unified web presence. 
          Bearing small, but significant costs for similar development tasks, sometimes hundreds 
          of times over, can cost a large university in the millions of dollars.
        </p>
			</section>
      
      <section data-background="https://cloud.githubusercontent.com/assets/688507/16708381/b074ac64-45bf-11e6-9c68-a4355e5b52c6.jpg" class="present">
				<h4>A Closer Look: The Case of a University</h4>
				<img src="http://i.imgur.com/nhFIFXe.gif">
			  <p>
          More complex CMS sites come with more inherent security risks, and while the number of 
          sites (and codebases) grow, the technical knowledge to apply security patches and other 
          updates does not necessarily grow with it.
			  </p>
			</section>
      
      <section data-background="https://cloud.githubusercontent.com/assets/688507/16708381/b074ac64-45bf-11e6-9c68-a4355e5b52c6.jpg" class="present">
				<h4>A Closer Look: The Case of a University</h4>
				<img src="http://www.reactiongifs.com/wp-content/uploads/2013/06/smart-kid.gif">
        <p>
          As the competition for high-caliber students grows more fierce, web presence plays a 
          crucial role in attracting applicants. 
        </p>
        <aside class="notes">
          Yet as a highly-distributed web presence grows, 
          the ability of communications and marketing team to leverage content strategy and analytics 
          actually shrinks. Hundreds, or even thousands, of individually maintained websites create 
          an unwieldily task for brand managers and analytic tracking relies on human gathering of data.
        </aside>
			</section>
      
      <section data-background="https://cloud.githubusercontent.com/assets/688507/16708381/b074ac64-45bf-11e6-9c68-a4355e5b52c6.jpg" class="present">
				<h4>A Closer Look: The Case of a University</h4>
        <img src="http://media3.popsugar-assets.com/files/thumbor/KbgCv3lcQw_axk9P_z8u95KVKM8/fit-in/1024x1024/filters:format_auto-!!-:strip_icc-!!-/2014/11/10/127/n/1922283/717e19c3a8e86c3e_elf-1/i/Exclamation.gif">
        <p>
          Providing a solid and universal user experience for content editors across the 
          entire campus allows for a better adoption rate and a more streamlined education and 
          training.
        </p>
			</section>

			<!-- OpenScholar -->
      <section>
      <h4>Harvard OpenScholar</h4>
				<img class="stretch" src="https://cloud.githubusercontent.com/assets/125707/11951341/e3774082-a898-11e5-9ff4-7f322166372f.jpg" />
			</section>

      <section data-background="http://www.harvard.edu/sites/default/files/content/121407_Snow_359.TL_.jpg" class="present">
      <h4>Harvard OpenScholar</h4>
        <ul>
          <li class="fragment">OpenScholar runs <span style="color: #e27058; font-weight: bold;">over 7,000 websites</span> at Harvard on a single database.</li>
          <li class="fragment">It has an <span style="color: #e27058; font-weight: bold;">estimated value of $7M</span> and was built at a fraction of the cost.</li>
          <li class="fragment">A comprehensive test suite <span style="color: #e27058; font-weight: bold;">cut release cycles in half</span>.</li>
        </ul>
			</section>

			<!-- Other uses for multisite -->
			<section>
      <h4>Other use cases for multisite</h4>
        <ul>
          <li class="fragment">
            <span style="color: #e27058; font-weight: bold;">Knowledge sharing platforms</span> that have lots of content and many editors (e.g. P4D of the European Commission).
          </li>
          <li class="fragment">
            <span style="color: #e27058; font-weight: bold;">Non-profits/NGOs</span> that need more than a 
            handful of sites - provides cost efficiency and low maintenance overhead.
          </li>
          <li class="fragment">
            <span style="color: #e27058; font-weight: bold;">Law-Firms/Large practices</span> to provide distributed 
            access and content editing permissions.
          </li>
        </ul>
			</section>

			<!-- OpSys -->
      <section data-background="http://eeagrants.org/var/eeagrants/storage/images/media/images/who-we-are/ec/72900-1-eng-GB/EC_full_page.jpg" class="present">
  			<h4>Project Sharing: P4D (European Commission)</h4>
				<img class="stretch" src="https://cloud.githubusercontent.com/assets/125707/12098605/ea29fecc-b32b-11e5-9d4f-adff92b8402f.png" />
			</section>

      <section data-background="http://eeagrants.org/var/eeagrants/storage/images/media/images/who-we-are/ec/72900-1-eng-GB/EC_full_page.jpg" class="present">
  			<h4>Knowledge Sharing: C4D (European Commission)</h4>
				<img class="stretch" src="https://cloud.githubusercontent.com/assets/688507/17247976/c357adde-555c-11e6-8c93-104207eedd40.png" />
			</section>

			<!-- Sierra Club -->
      <section data-background="https://eldermountain.files.wordpress.com/2016/07/moon.jpg" class="present">
  			<h4>Large NGO: Sierra Club</h4>
				<img class="stretch" src="https://cloud.githubusercontent.com/assets/688507/16700763/b8103024-4529-11e6-8133-529d35105e7b.png" />
			</section>

			<!-- Last slide -->
			<section data-background="https://cloud.githubusercontent.com/assets/125707/13070800/cf27ec14-d497-11e5-82e3-7cb9c73fe6be.jpg" class="present">
				<div> 
  				<span style="background-color: black; opacity: 0.85; padding: 20px 40px; font-family: Abril Fatface; color: #e27058; font-size: 50px;">
				    gizra
  				</span>
				</div>
    		<div style="margin: 60px 0;">
      		<span style="background-color: black; opacity: 0.85; padding: 20px 40px;">
      		  slides available at:
      		</span>
        </div>
    		<div style="margin: 60px 0;">
      		<p style="background-color: black; opacity: 0.85; padding: 20px 40px; line-height: 2em;">
            <a href="https://gizra-presentations.github.io/multisite">gizra-presentations.github.io/multisite</a>
      		</p>
        </div>
			</section>


		</div>

	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// Full list of configuration options available at:
		// https://github.com/hakimel/reveal.js#configuration
		Reveal.initialize({
			controls: false,
			progress: true,
			history: true,
			center: true,

			transition: 'slide', // none/fade/slide/convex/concave/zoom

			// Optional reveal.js plugins
			dependencies: [{
				src: 'lib/js/classList.js',
				condition: function() {
					return !document.body.classList;
				}
			}, {
				src: 'plugin/markdown/marked.js',
				condition: function() {
					return !!document.querySelector('[data-markdown]');
				}
			}, {
				src: 'plugin/markdown/markdown.js',
				condition: function() {
					return !!document.querySelector('[data-markdown]');
				}
			}, {
				src: 'plugin/highlight/highlight.js',
				async: true,
				callback: function() {
					hljs.initHighlightingOnLoad();
				}
			}, {
				src: 'plugin/zoom-js/zoom.js',
				async: true
			}, {
				src: 'plugin/notes/notes.js',
				async: true
			}, {
				src: 'socket.io/socket.io.js',
				async: true
			}, {
				src: 'plugin/notes-server/client.js',
				async: true
			}]
		});
	</script>

</body>

</html>
